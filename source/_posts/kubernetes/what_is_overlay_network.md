---
title: "[kubernetes]什么是overlay network"
date: 2021-08-09T08:44:20+03:00
draft: true
categories: ["kubernetes", "network"]
tags: ["kubernetes","network", "基本概念"]
---
# 概述
* overlay network 这个概念是在接触kubernetes后常常遇到的, 比如pod之间. 它其实就是解决了一个问题,就是, 不同宿主机之间, 要想pod之间能直接通信, 那么就必须通过某种方法来达到目的
* overlay network就是这么一个网络, 和它的名称一样, 是和我们直观的网络不在同一层的网络. 
# 图示
打个比方, 有两个宿主机172.10.0.4 和 192.168.1.5, 很明显他们不在同一网段, 不能直接通信, 两者之间用一个路由器链接. 那么此时假设, 两个机器上各有一个pod, 10.0.0.3和10.0.0.4, 而我们需要这两个pod之间直接通信的话, 那么这两个pod之间我们架设的网络, 就是一个overlay 网络, 也就是凌驾在节点自身网络之上的另一个网络, 一般就是将pod数据包再次封装成节点的数据包, 然后转发, 或者是建立隧道等等, 比如上面的例子的图示, 这里的Overlay 可以是个隧道, 可以是vpn, 可以是封装后的包通过路由 等等...
```
+---------------+          +---------------+
|               |          |               |
|   +-------+   |          |   +-------+   |
|   | pod1  |====[Overylay]====| pod2  |   |
|   +-------+   |          |   +-------+   |
|   10.0.0.3    |          |   10.0.0.4    |
|               |          |               |
+---------------+          +---------------+
    172.10.0.4                192.168.1.5
       |                            |
       |===========[Router]=========|         
```


